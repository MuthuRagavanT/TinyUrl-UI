<div class="container mt-5">

  <!-- Tiny URL Generator Card -->
  <div class="card p-4 shadow-sm mb-4">
    <h1 class="text-center mb-4">Tiny URL</h1>

    <form (ngSubmit)="shortenUrl()">
      <div class="row mb-3 align-items-end">
        <div class="col-md-9">
          <label for="longUrl" class="form-label">Enter Long URL:</label>
          <input
            type="url"
            id="longUrl"
            class="form-control"
            [(ngModel)]="longUrl"
            name="longUrl"
            required
            placeholder="https://example.com"
          >
          <div *ngIf="isNotValidUrl" class="text-danger mt-1">
            URL must start with http:// or https://
          </div>
        </div>
        
        <div class="col-md-3 d-flex align-items-center">
          <div class="form-check mb-2">
            <input
              type="checkbox"
              class="form-check-input"
              id="isPrivate"
              [(ngModel)]="isPrivate"
              name="isPrivate"
            >
            <label class="form-check-label" for="isPrivate">Is Private</label>
          </div>
        </div>
    </div>
      <div class="text-center">
        <button type="submit" class="btn btn-primary">Generate Short URL</button>
      </div>
    </form>
  </div>

  <!-- Shortened URLs List Card -->
  <div class="card p-4 shadow-sm">
    <h5 class="mb-3">Shortened URLs:</h5>
     <div class="mb-3 col-4">
      <input
        type="text"
        class="form-control"
        placeholder="Search by Long URL..."
        [(ngModel)]="searchText"
      >
    </div>
    <!-- Show message if urlList is empty -->
    <div *ngIf="urlList.length === 0" class="text-center text-muted">
      No URLs have been shortened yet.
    </div>

    <!-- Show list if urlList has records -->
    <ul *ngIf="filteredUrls().length > 0" class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let url of filteredUrls(); let i = index">
        <div>
          <a [href]="url.shortUrl" target="_blank" (click)="UpdateData(url.code)">{{ url.shortUrl }}</a>
          <small class="text-muted d-block">{{ url.longUrl }}</small>
            
        </div>
        <div>
          <button class="btn btn-outline-secondary btn-sm me-2" (click)="copyToClipboard(url.shortUrl,i)">{{ copiedIndex === i ? 'Copied!' : 'Copy' }}</button>
          <span class="badge bg-info text-dark mt-1 me-2">{{ url.clickCount}} clicks</span>
          <button (click)="DeleteData(url.code)" class="btn btn-danger btn-sm" >Delete</button>
        </div>
      </li>
    </ul>
    <!-- Show message if no results match filter -->
    <div *ngIf="urlList.length > 0 && filteredUrls().length === 0" class="text-center text-muted">
      No URLs match your search.
    </div>
  </div>
</div>